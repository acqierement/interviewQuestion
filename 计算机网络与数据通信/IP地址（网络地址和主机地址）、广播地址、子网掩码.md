# IP地址（网络地址和主机地址）、子网掩码、广播地址

IP地址一般长这样`192.168.3.5`可以看到分为四个部分，其实IP地址表示的是32位二进制数。`192.168.3.5`表示成 `11000000.10101000.00000011.00000101`，每一部分有8位二进制，2的八次方就是256，所以每一部分最多就是255。

## 网络地址和主机地址

IP地址由网络地址（网络标识）和主机地址（主机标识）组成。不同的网段，网络地址不一样；而同个网段中，网络地址一样，但是主机地址必须不一样。很好理解，网络地址表示你在哪条街，主机地址表示你的门牌号。

说了这么多，那到底哪几位是网络地址，哪几位是主机地址？其实并不确定，如果一条街特别长，就需要很多门牌号，所以就需要多分配几位主机地址，而这样网络地址位数就会比较少了。而如果每条街都很短，那就可以反过来给网络地址多分配几位了。

所以IP就分成了四类，以满足不同需求，A类IP地址第1位到第8位是网络地址，后面24位是主机地址。B类IP地址第1位到第16位是网络地址，后面16位是主机地址......我们来看看具体是怎么分的。

## IP地址分类

每一类IP地址都有自己的IP地址范围，在这个范围里面还有私有IP的地址范围。

![](H:\Adata\gitHubWorkspace\interviewQuestion\计算机网络与数据通信\配置图片\私有IP地址范围.png)

平时我们看到的数据中心里，办公室、家里或学校的 IP 地址，一般都是私有 IP 地址段。因为这些地址允许组织内部的 IT 人员自己管理、自己分配，而且可以重复。因此，你学校的某个私有 IP 地址段和我学校的可以是一样的。

如果你要搭建一个网站给学校的人用，你可以向学校申请一个私有IP地址。但是你如果想要让全世界的人都可以访问你的网站，就需要一个公有IP地址。公有 IP 地址有个组织统一分配，你需要去买。

- A类地址

  A类IP地址是首位以“0”开头的地址。第1位到第16位是它的网络标识。用十进制标识的话，0.0.0.0~127.0.0.0是A类的网络地址，A类地址的后24位是主机地址。

- B类地址

  B类IP地址是首位以“10”开头的地址。第1位到第16位是它的网络标识。用十进制标识的话，128.0.0.0~191.255.0.0是B类的网络地址，B类地址的后16位是主机地址。

- C类地址

  C类IP地址是首位以“110”开头的地址。第1位到第16位是它的网络标识。用十进制标识的话，192.0.0.0~223.255.255.0是C类的网络地址，C类地址的后8位是主机地址。

- D类地址

  D类IP地址是首位以“1110”开头的地址。第1位到第32位是它的网络标识。用十进制标识的话，224.0.0.0~239.255.255.255是D类的网络地址，D类地址没有主机地址，常用于多播。多播和后面部分要介绍的广播是相对应的，广播将数据发送给所有的终端主机，再由主机ip之上的一层去判断是否有必要接受数据，使用广播会给没有关系的网络或者主机带来影响，而多播则可以给特定的主机发送数据，解决了这个问题。多播的内容不在本篇文章范围内，感兴趣的可以自己去看看。

  ![](配置图片\四类IP地址small.jpg)

  总结一下四个分类，其实四个分类的目的就是：让我们看到这个IP地址的时候，就可以知道是哪一类IP地址，从而马上就可以知道网络地址和主机地址的划分。

  其实还有E类，不过这个类别暂时没有使用。

  这里我说的是马上，但是这是对于熟悉IP地址的人，对于不熟悉的人，你看到这个IP地址也不太能分出是哪一类，所以这种方式不是很直观，子网掩码就可以弥补这个缺点。

  

## 无类型域间选路（CIDR）

前面我们提到了IP地址的四个分类，可以根据自己需要选择合适的IP地址。但是这样简单的分类是否合理呢？比如B类IP网络，理论上一个链路内允许6万5千多台计算机连接。然而，实际网络架构中，一般不会在一个链路上连接6万5千多台计算机。因此，这种架构实际上是不存在的。所以提出了CIDR来对IP地址进行更细的划分。

CIDR(无类型域间路由选择,Classless Inter-Domain Routing)是一个在Internet上创建附加地址的方法,这些地址提供给服务提供商(ISP),再由ISP分配给客户。

无类型是对应前面提到的有类型的四种分类。CIDR不使用类别对IP地址进行分类，而是自己可以决定要从哪一位开始将IP地址划分成网络地址和主机地址。

比如10.100.122.2/24，这个 IP 地址中有一个斜杠，斜杠后面有个数字 24。这种地址表示形式，就
是 CIDR。后面 24 的意思是，32 位中，前 24 位是网络号，后 8 位是主机号。

伴随着 CIDR 存在的，一个是广播地址，10.100.122.255。如果发送这个地址，所有 10.100.122 网络
里面的机器都可以收到。另一个是子网掩码，255.255.255.0。

### 子网掩码

我们常见的子网掩码可能是`255.255.255.0`可以注意到前面24位都是1，后面8位都是0。其实前面都是1的部分代表网络地址，后面0的部分代表主机地址。所以看到这个子网掩码我们就知道前24位是网络地址，后面8位是主机地址。我们一般可以看到IP地址的两个表现方式。

```
IP地址   172.20.100.52
子网掩码  255.255.255.192

172.20.100.52 / 26
```

这两种方法是等价的，前一种方式将子网掩码和 IP地址按位与计算 （AND），就可得到网络号，比如我们在windows命令行输入ipconfig，就会显示IP地址和子网掩码，我们就可以根据这两个来看出网络地址和主机地址的位数。

而第二种方法更直观，更简单。而且第二种方式在记录网络地址的时候可以省略后面的“0”。例如172.20.0.0 / 16跟172.20 / 16 其实是一个意思。

### 广播地址

将IP地址中的主机地址部分全部设置为1，就成为了广播地址。

例如`172.20.0.0 / 16`的广播地址就是`172.20.255.255`。

广播分为本地广播和直接广播。

本地广播就是在自己网段进行广播，只有自己人才可以收的到，所以叫本地广播。 例如网络地址是192.168.0.0/24，广播地址是192.168.0.255，这个广播地址的IP包会被路由器屏蔽，无法到达其他链路上。

直接广播是在不同网络之间的广播。例如网络地址是192.168.0.0/24的主机向192.168.1.255/24的目标地址发送IP包，则所有的192.168.1.1~192.168.1.254的主机都能收到这个包。